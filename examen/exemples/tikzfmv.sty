% tikzfmv package
% 
% (c) Filipe Vasconcelos
%
%% This program can be redistributed and/or modified under the terms
%% of the LaTeX Project Public License Distributed from CTAN archives
%% in directory macros/latex/base/lppl.txt.
% 
\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{tikzfmv}
  [2019/10/21 v0.01 LaTeX package de macros tikz variÃ©es]

\RequirePackage{tikz}
\RequirePackage{pgfplots}
\RequirePackage{xspace}
\def\hi{Ce paquet regroupe des macros tikz utiles pour fmv.}
\let\myDate\date

\tikzset{%
  % use: dblarw={color}{totalouterwidth}{outlineinsidewidth}
  dblarw/.style n args={3}{%,
    -latex,
    line width=#2,
    draw=#1,  % this draw and color could
    color=#1, % be an additional style arg
   % opacity=0.9,
    % note: just color=#1 makes all black!
    % fill=#1 makes insides (in an open! curve) filled too!
    % draw=#1,color=#1, seems to work, though
    postaction={
      draw=#1,
      color=#1,
      line width=#2-#3,
      shorten >=2*#3,
      shorten <=#3,
    },
    dblarw/.default={gray}{5pt}{1pt},
    dblarw/.initial={gray}{5pt}{1pt},
  }
}
\tikzset{%
  dblarwR/.style n args={3}{%,
    latex-,
    line width=#2,
    draw=#1,  % this draw and color could
    color=#1, % be an additional style arg
    opacity=0.9,
    % note: just color=#1 makes all black!
    % fill=#1 makes insides (in an open! curve) filled too!
    % draw=#1,color=#1, seems to work, though
    postaction={
      draw=#1,
      color=#1,
      line width=#2-#3,
      shorten >=2*#3,
      shorten <=#3,
    },
    dblarwR/.default={gray}{5pt}{1pt},
    dblarwR/.initial={gray}{5pt}{1pt},
  }
}
\tikzset{cross/.style={cross out, draw=black, minimum size=2*(#1-\pgflinewidth), inner sep=0pt, outer sep=0pt},
        %default radius will be 1pt. 
cross/.default={1pt}}
\tikzset{circ/.style={circle, draw=black, minimum size=2*(#1-\pgflinewidth), inner sep=0pt, outer sep=0pt},               
%default radius will be 1pt.                                                                                          
circ/.default={1pt}}

\newcommand{\tdcylxy}[5]{% origin x, origin y, origin z, radius, height      
    \path (1,0,0);    
    \pgfgetlastxy{\cylxx}{\cylxy} \path (0,1,0); 
    \pgfgetlastxy{\cylyx}{\cylyy} \path (0,0,1);
    \pgfgetlastxy{\cylzx}{\cylzy} \pgfmathsetmacro{\cylt}{(\cylzy * \cylyx - \cylzx * \cylyy)/ (\cylzy * \cylxx - \cylzx * \cylxy)};  
    \pgfmathsetmacro{\ang}{atan(\cylt)};  
    \pgfmathsetmacro{\ct}{1/sqrt(1 + (\cylt)^2)}; 
    \pgfmathsetmacro{\st}{\cylt * \ct}; 
    \filldraw[fill=blue!50!white,opacity=0.50] (#4*\ct+#1,#4*\st+#2,#3) -- ++(0,0,#5) arc[start angle=\ang,delta angle=180,radius=#4] -- ++(0,0,-#5) arc[start angle=\ang+180,delta angle=180,radius=#4];

    \filldraw[fill=blue!50!white,opacity=0.50] (#1,#2,#3) circle[radius=#4];
    }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%not working yet
\newcommand{\tenpow}[1]{%
$10^{#1}$%
}
\newcounter{tpcounter}
\newcommand{\tp}[1][]{
\def\tmp{#1}%
\ifx\tmp\empty
\stepcounter{tpcounter}
\tenpow{\thetpcounter}
\else
\setcounter{tpcounter}{\number#1}
\tenpow{\thetpcounter}
\fi}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\definecolor{col1}{RGB}{57,106,177}
\tikzstyle{tcol1}=[thick,col1]
\definecolor{col2}{RGB}{218,124,48}
\tikzstyle{tcol2}=[thick,col2]
\definecolor{col3}{RGB}{62,150,81}
\tikzstyle{tcol3}=[thick,col3]
\definecolor{col4}{RGB}{204,37,41}
\tikzstyle{tcol4}=[thick,col4]
\definecolor{col5}{RGB}{83,81,83}
\tikzstyle{tcol5}=[thick,col5]
\definecolor{col6}{RGB}{107,76,154}
\tikzstyle{tcol6}=[thick,col6]
\definecolor{col7}{RGB}{146,36,40}
\tikzstyle{tcol7}=[thick,col7]
\definecolor{col8}{RGB}{148,139,61}
\tikzstyle{tcol8}=[thick,col8]
\definecolor{col1}{RGB}{57,106,177}
\tikzstyle{utcol1}=[ultra thick,col1]
\definecolor{col2}{RGB}{218,124,48}
\tikzstyle{utcol2}=[ultra thick,col2]
\definecolor{col3}{RGB}{62,150,81}
\tikzstyle{utcol3}=[ultra thick,col3]
\definecolor{col4}{RGB}{204,37,41}
\tikzstyle{utcol4}=[ultra thick,col4]
\definecolor{col5}{RGB}{83,81,83}
\tikzstyle{utcol5}=[ultra thick,col5]
\definecolor{col6}{RGB}{107,76,154}
\tikzstyle{utcol6}=[ultra thick,col6]
\definecolor{col7}{RGB}{146,36,40}
\tikzstyle{utcol7}=[ultra thick,col7]
\definecolor{col8}{RGB}{148,139,61}
\tikzstyle{utcol8}=[ultra thick,col8]
\definecolor{col1}{RGB}{57,106,177}
\tikzstyle{vtcol1}=[very thick,col1]
\definecolor{col2}{RGB}{218,124,48}
\tikzstyle{vtcol2}=[very thick,col2]
\definecolor{col3}{RGB}{62,150,81}
\tikzstyle{vtcol3}=[very thick,col3]
\definecolor{col4}{RGB}{204,37,41}
\tikzstyle{vtcol4}=[very thick,col4]
\definecolor{col5}{RGB}{83,81,83}
\tikzstyle{vtcol5}=[very thick,col5]
\definecolor{col6}{RGB}{107,76,154}
\tikzstyle{vtcol6}=[very thick,col6]
\definecolor{col7}{RGB}{146,36,40}
\tikzstyle{vtcol7}=[very thick,col7]
\definecolor{col8}{RGB}{148,139,61}
\tikzstyle{vtcol8}=[very thick,col8]

\pgfplotscreateplotcyclelist{fmvcolist}{%
{col1},
{col2},
{col3},
{col4},
{col5},
{col6},
{col7},
{col8},
}
\tikzstyle{solid}=                   [dash pattern=]
\tikzstyle{dotted}=                  [dash pattern=on \pgflinewidth off 2pt]
\tikzstyle{densely dotted}=          [dash pattern=on \pgflinewidth off 1pt]
\tikzstyle{loosely dotted}=          [dash pattern=on \pgflinewidth off 4pt]
\tikzstyle{dashed}=                  [dash pattern=on 3pt off 3pt]
\tikzstyle{densely dashed}=          [dash pattern=on 3pt off 2pt]
\tikzstyle{loosely dashed}=          [dash pattern=on 3pt off 6pt]
\tikzstyle{dashdotted}=              [dash pattern=on 5pt off 2pt on \the\pgflinewidth off 2pt]
\tikzstyle{densely dashdotted}=      [dash pattern=on 3pt off 1pt on \the\pgflinewidth off 1pt]
\tikzstyle{loosely dashdotted}=      [dash pattern=on 3pt off 4pt on \the\pgflinewidth off 4pt]

\tikzset{BarreStyle/.style =   {opacity=.3,line width=4mm,line cap=round,color=#1}}
\tikzset{SignePlus/.style  =   {above left,opacity=0.8,circle,inner sep=0.5pt,fill=#1!50}}
\tikzset{SigneMoins/.style =   {above right,opacity=0.8,circle,inner sep=0.5pt,fill=#1!50}}
\tikzset{node style ge/.style={circle,font=\bfseries}}

\tikzstyle{signalb}=[very thick,col1,samples=201]
\tikzstyle{signalo}=[very thick,col2,samples=201]
\tikzstyle{signalg}=[very thick,col3,samples=201]
\tikzstyle{signalr}=[very thick,col4,samples=201]
\tikzstyle{signaln}=[very thick,col5,samples=201]
\tikzstyle{signalv}=[very thick,col6,samples=201]
\tikzstyle{signalm}=[very thick,col7,samples=201]
\tikzstyle{signaly}=[very thick,col8,samples=201]
%\tikzstyle{signaln6g}=[very thick,black!60!green,samples=201]
%\tikzstyle{signaln1g}=[very thick,black!10!green,samples=201]
%\tikzstyle{signaln3r}=[very thick,black!30!red,samples=201]
%\tikzstyle{signaln5w}=[very thick,black!50!white,samples=201]
\tikzstyle{envelop}=[very thick,col5,samples=201,dotted]
\tikzstyle{signaljump}=[dashed,very thick,blue]

\tikzstyle{utr}=[ultra thick,col4]
\tikzstyle{utb}=[ultra thick,col1]
\tikzstyle{utg}=[ultra thick,col3]
\tikzstyle{utn}=[ultra thick,col5]

\tikzstyle{dutb}=[dashed,ultra thick,col1]
\tikzstyle{duto}=[dashed,ultra thick,col2]
\tikzstyle{dutg}=[dashed,ultra thick,col3]
\tikzstyle{dutr}=[dashed,ultra thick,col4]
\tikzstyle{dutn}=[dashed,ultra thick,col5]

\tikzstyle{vtr}=[very thick,col4]
\tikzstyle{vtb}=[very thick,col1]
%\tikzstyle{vtn6g}=[very thick,black!60!green]

\tikzstyle{tr}=[thick,col4]
\tikzstyle{tb}=[thick,col1]
%\tikzstyle{tn6g}=[thick,black!60!green]

\tikzstyle{dtn}=[dashed,thick,col5]
\tikzstyle{dtr}=[dashed,thick,col4]
\tikzstyle{dtb}=[dashed,thick,col1]
\tikzstyle{dtg}=[dashed,thick,col3]

\tikzstyle{dvtn}=[dashed,very thick,col5]
\tikzstyle{dvtr}=[dashed,very thick,col4]
\tikzstyle{dvtb}=[dashed,very thick,col1]
\tikzstyle{dvtg}=[dashed,very thick,col3]

\tikzstyle{dvtgf}=[dashed,very thick,col3,-latex]

\newcommand\markangle[6][red]{% [color] {X} {origin} {Y} {mark} {radius}
  % filled circle: red by default
  \begin{scope}
    \path[clip] (#2) -- (#3) -- (#4);
    \fill[color=#1,fill opacity=0.2,draw=#1,name path=circle]
    (#3) circle (#6mm);
  \end{scope}
  % middle calculation
  \path[name path=line one] (#3) -- (#2);
  \path[name path=line two] (#3) -- (#4);
  \path[%
  name intersections={of=line one and circle, by={inter one}},
  name intersections={of=line two and circle, by={inter two}}
  ] (inter one) -- (inter two) coordinate[pos=.5] (middle);
  % bissectrice definition
  \path[%
  name path=bissectrice
  ] (#3) -- (barycentric cs:#3=-1,middle=1.2);
  % put mark
  \path[
  name intersections={of=bissectrice and circle, by={middleArc}}
  ] (#3) -- (middleArc) node[pos=1.3,#1] {#5};
}


\endinput
%%
%% End of file `tikzfmv.sty'.
